services:
  redifire:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: redifire
    restart: on-failure:10
    read_only: true
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      # Configuration file path
      - CONFIG_PATH=/app/config.yaml
      # Redis password (optional, can also be set in config.yaml)
      - REDIS_PASSWORD=${REDIS_PASSWORD:-}
      # Google Cloud credentials (optional, can also be set in config.yaml)
      - GOOGLE_APPLICATION_CREDENTIALS=/app/credentials.json
    volumes:
      # Mount your configuration file
      - ./config.yaml:/app/config.yaml:ro
      # Mount your Google Cloud credentials file (if using file-based auth)
      - ${GOOGLE_APPLICATION_CREDENTIALS:-./credentials.json}:/app/credentials.json:ro

